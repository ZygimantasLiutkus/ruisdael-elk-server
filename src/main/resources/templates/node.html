<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Ruisdael Monitoring | ' + ${device.getName()}">Ruisdael Monitoring</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/overview.css" rel="stylesheet">
    <link href="/css/node.css" rel="stylesheet">
    <link href="/css/navbar.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body style="background-color:#2e3236">
<div th:insert="~{navbar :: navbar}">
</div>
<div class="container overview">
    <div class="row" style="margin-bottom: 4%;">
        <h1 style="color: white;" th:text="${device.getName()}">Unknown Node</h1>
        <div class="col-3 node-box">
            <p style="margin-top: 15px;">Status: <span th:text="${device.getStatus()}"></span></p>
            <p>
                Location: <span th:text="${device.getLocation().getName()}">Unknown</span><br />
                Elevation: <span th:text="${device.getLocation().getElevation()}">Unknown</span><br/>
                Coordinates: <span th:text="${device.getLocation().getHumanreadableCoordinates()}">Unknown</span>
            </p>
            <p>
                Instrument Name: <span th:text="${device.getInstrument().getName()}">Unknown</span><br />
                Instrument Type: <span th:text="${device.getInstrument().getType()}">Unknown</span><br />
            </p>
            <div th:if="${device.getCustomFields().size() > 0}">
                <hr />
                <div th:each="field : ${device.getCustomFields()}">
                    <span th:text="${field.key} + ': ' + ${field.value}"></span><br />
                </div>
            </div>
            <div style="position:absolute; bottom: 0;">
                <p>Last Update: <span th:text="${device.getTimestamp()}">Unknown</span></p>
            </div>
        </div>
        <div class="col-9">
            <div class="row justify-content-center">
                <div class="col-4 node-box">
                    <h2>CPU:</h2>
                    <h3 class="text-center"><span th:text="${device.getCpuUsage()}">???</span>%</h3>
                </div>
                <div class="col-8 node-box">
                    <h2>Memory:</h2>
                    <h3 class="text-center"><span th:text="${device.getHumanReadableValueGbs(device.getRam().getUsedBytes())}">???</span> GB / <span th:text="${device.getHumanReadableValueGbs(device.getRam().getTotal())}">???</span> GB (Used/Total)</h3>
                </div>
            </div>
            <div class="row">
                <div class="col node-box">
                    <h2>Storage:</h2>
                    <h3 class="text-center"><span th:text="${device.getHumanReadableValueGbs(device.getStorage().getFreeStorage())}">???</span> GB / <span th:text="${device.getHumanReadableValueGbs(device.getStorage().getTotalStorage())}">???</span> GB (Used/Total)</h3>
                </div>
            </div>
            <div class="row">
                <div class="col node-box">
                    <h2>Network - Uplink:</h2>
                    <h3 class="text-center"><span th:text="${device.getHumanReadableValueMbs(device.getBandwidth().getUploadSize())}">???</span> MB Upload</h3>
                    <h3 class="text-center"><span th:text="${device.getHumanReadableValueKbs(device.getBandwidth().getUploadSpeed())}">???</span>  KB/s Bandwidth Use</h3>
                    <br />
                    <h2>Network - Downlink:</h2>
                    <h3 class="text-center"><span th:text="${device.getHumanReadableValueMbs(device.getBandwidth().getDownloadSize())}">???</span> MB Download</h3>
                    <h3 class="text-center"><span th:text="${device.getHumanReadableValueKbs(device.getBandwidth().getDownloadSpeed())}">???</span> KB/s Bandwidth Use</h3>
                </div>
            </div>
            <div class="row" style="height: 100%">
                <div class="col node-box">
                    <iframe th:src="'http://localhost:8085/app/dashboards#/view/90ab7390-ff08-11ed-a647-f3f338cb7d41?embed=true&_g=(filters:!((query:(match_phrase:(_index:collector_' + ${device.getName()} + ')))),refreshInterval:(pause:!t,value:60000),time:(from:now-24h,to:now))&show-time-filter=true'"
                            style="height: 100%; width: 100%;"></iframe>
                </div>
            </div>
        </div>

    </div>
</div>

</body>
</html>